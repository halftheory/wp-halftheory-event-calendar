(function(c,h){if("object"===typeof eventcalendar){eventcalendar_loadMap=function(e,a){var d=eventcalendar.prefix+"-map-"+a.data("id");if(!c("#"+d).length)return!1;if(0<c("#"+d).children().length)return d;var b=c("#"+d).first();if("openstreetmap"==e&&eventcalendar.openstreetmap_src){b.addClass("loading");var f={bbox:parseFloat(a.data("longitude"))-.02+","+(parseFloat(a.data("latitude"))-.02)+","+(parseFloat(a.data("longitude"))+.02)+","+(parseFloat(a.data("latitude"))+.02),layer:"mapnik"};c("<iframe></iframe>").attr("src",
eventcalendar.openstreetmap_src+"?"+c.param(f)).appendTo(b);b.removeClass("loading")}else if("google"==e&&"undefined"!==typeof google&&"function"===typeof google.maps.Map){b.addClass("loading");f={lat:parseFloat(a.data("latitude")),lng:parseFloat(a.data("longitude"))};var g=new google.maps.Map(document.getElementById(d),{zoom:12,center:f,mapTypeId:google.maps.MapTypeId.ROADMAP,zoomControl:!0});new google.maps.Marker({position:f,map:g});b.removeClass("loading")}else return!1;return d};eventcalendar_startup=
function(){eventcalendar.maps_load_startup&&c("."+eventcalendar.prefix+"-map-toggle").each(function(b){eventcalendar_loadMap(eventcalendar.maps_provider,c(this))})};var g={openstreetmap:1,google:2},b={};eventcalendar_init=function(){if("undefined"===typeof e&&"undefined"!==typeof window.eventcalendar)var e=window.eventcalendar;eventcalendar_startup();c("body").on("click","."+e.prefix+"-map-toggle",function(a){a.preventDefault();a=eventcalendar_loadMap(e.maps_provider,c(this));if(!1!==a){b[a]||(b[a]=
0);b[a]++;if(b[a]<g[e.maps_provider])return!1;var d=c("#"+a).first();d.hasClass("map-open")?d.removeClass("map-open").slideUp("fast").addClass("map-close"):d.removeClass("map-close").slideDown("fast").addClass("map-open");b[a]=0}return!1})};c(document).ready(function(){eventcalendar_init()})}})(jQuery);